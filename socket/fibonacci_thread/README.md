Based on:

https://www.youtube.com/watch?v=MCs5OvhV9S4
https://github.com/dabeaz/concurrencylive/blob/master/server.py
